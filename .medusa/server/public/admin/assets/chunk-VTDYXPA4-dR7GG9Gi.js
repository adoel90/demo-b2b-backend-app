import{I as qe}from"./chunk-PYIO3TDQ-D8Zv8hXV.js";import{g as L}from"./chunk-PDWBYQOW-Dmlh1vBq.js";import{c as me,D as Ke,I as le,e as Ge,f as He,g as Be,h as fe}from"./chunk-53RYGJCD-BkEf0pwB.js";import{c as Ue}from"./chunk-MWVM4TYO-bKUcYSnf.js";import{c as w}from"./chunk-6GU6IDUA-CDc7wW5L.js";import{K as We}from"./chunk-6HTZNHPT-C3g-6wSS.js";import{S as A}from"./chunk-4TC5YS65-C1s3AhWO.js";import{r as f,aT as _,j as t,f8 as Xe,cR as Ye,f9 as he,cS as Je,bl as Qe,bm as Ze,bn as et,cQ as xe,fa as tt,cP as ot,cY as st,cT as ge,b as $,cy as nt,ac as it,ad as rt,a6 as B,x as at,w as y,H as lt,J as q,B as Y,ah as ve,y as be,E as te,X as ct,b8 as dt,D as k,cA as se,C as ut,a8 as F,aj as S,ai as J,bK as M,v as z,$ as pt,N as mt,_ as ft,bf as ht,z as Q,cB as xt,au as je,a0 as I}from"./index-C_TCY6wF.js";import{T as Z}from"./Trans-Bk6EMC52.js";import{C as D}from"./currency-input-Bm92Sz6e.js";var gt=Object.defineProperty,K=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,ce=(e,s,o)=>s in e?gt(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,vt=(e,s)=>{for(var o in s||(s={}))Ce.call(s,o)&&ce(e,o,s[o]);if(K)for(var o of K(s))ye.call(s,o)&&ce(e,o,s[o]);return e},bt=(e,s)=>{var o={};for(var n in e)Ce.call(e,n)&&s.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&K)for(var n of K(e))s.indexOf(n)<0&&ye.call(e,n)&&(o[n]=e[n]);return o};const _e=f.forwardRef((e,s)=>{var o=e,{color:n="currentColor"}=o,i=bt(o,["color"]);return f.createElement("svg",vt({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},i),f.createElement("path",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.056 1.944h4v4M13.056 1.944l-4 4M1.944 9.056v4h4M1.944 13.056l4-4"}))});_e.displayName="ArrowsPointingOut";var jt=Object.defineProperty,G=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable,de=(e,s,o)=>s in e?jt(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,Ct=(e,s)=>{for(var o in s||(s={}))we.call(s,o)&&de(e,o,s[o]);if(G)for(var o of G(s))Pe.call(s,o)&&de(e,o,s[o]);return e},yt=(e,s)=>{var o={};for(var n in e)we.call(e,n)&&s.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&G)for(var n of G(e))s.indexOf(n)<0&&Pe.call(e,n)&&(o[n]=e[n]);return o};const Ne=f.forwardRef((e,s)=>{var o=e,{color:n="currentColor"}=o,i=yt(o,["color"]);return f.createElement("svg",Ct({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},i),f.createElement("path",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7.5 13.945a6.444 6.444 0 1 0 0-12.89 6.444 6.444 0 0 0 0 12.89M8.167 5.5h2.666M4.167 5.5h1.777M5.944 3.944v3.111M9.056 9.5h1.777M4.167 9.5h2.666M9.056 7.944v3.111"}))});Ne.displayName="CircleSliders";var P="Accordion",_t=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ne,wt,Pt]=Xe(P),[U,co]=Ye(P,[Pt,he]),ie=he(),Oe=_.forwardRef((e,s)=>{const{type:o,...n}=e,i=n,a=n;return t.jsx(ne.Provider,{scope:e.__scopeAccordion,children:o==="multiple"?t.jsx(It,{...a,ref:s}):t.jsx(At,{...i,ref:s})})});Oe.displayName=P;var[Ae,Nt]=U(P),[Ie,Ot]=U(P,{collapsible:!1}),At=_.forwardRef((e,s)=>{const{value:o,defaultValue:n,onValueChange:i=()=>{},collapsible:a=!1,...r}=e,[l,c]=xe({prop:o,defaultProp:n,onChange:i});return t.jsx(Ae,{scope:e.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:_.useCallback(()=>a&&c(""),[a,c]),children:t.jsx(Ie,{scope:e.__scopeAccordion,collapsible:a,children:t.jsx(Re,{...r,ref:s})})})}),It=_.forwardRef((e,s)=>{const{value:o,defaultValue:n,onValueChange:i=()=>{},...a}=e,[r=[],l]=xe({prop:o,defaultProp:n,onChange:i}),c=_.useCallback(p=>l((u=[])=>[...u,p]),[l]),d=_.useCallback(p=>l((u=[])=>u.filter(m=>m!==p)),[l]);return t.jsx(Ae,{scope:e.__scopeAccordion,value:r,onItemOpen:c,onItemClose:d,children:t.jsx(Ie,{scope:e.__scopeAccordion,collapsible:!0,children:t.jsx(Re,{...a,ref:s})})})}),[Rt,W]=U(P),Re=_.forwardRef((e,s)=>{const{__scopeAccordion:o,disabled:n,dir:i,orientation:a="vertical",...r}=e,l=_.useRef(null),c=tt(l,s),d=wt(o),u=ot(i)==="ltr",m=st(e.onKeyDown,h=>{var E;if(!_t.includes(h.key))return;const x=h.target,b=d().filter(T=>{var ae;return!((ae=T.ref.current)!=null&&ae.disabled)}),C=b.findIndex(T=>T.ref.current===x),R=b.length;if(C===-1)return;h.preventDefault();let j=C;const g=0,N=R-1,v=()=>{j=C+1,j>N&&(j=g)},O=()=>{j=C-1,j<g&&(j=N)};switch(h.key){case"Home":j=g;break;case"End":j=N;break;case"ArrowRight":a==="horizontal"&&(u?v():O());break;case"ArrowDown":a==="vertical"&&v();break;case"ArrowLeft":a==="horizontal"&&(u?O():v());break;case"ArrowUp":a==="vertical"&&O();break}const X=j%R;(E=b[X].ref.current)==null||E.focus()});return t.jsx(Rt,{scope:o,disabled:n,direction:i,orientation:a,children:t.jsx(ne.Slot,{scope:o,children:t.jsx(ge.div,{...r,"data-orientation":a,ref:c,onKeyDown:n?void 0:m})})})}),H="AccordionItem",[St,re]=U(H),Se=_.forwardRef((e,s)=>{const{__scopeAccordion:o,value:n,...i}=e,a=W(H,o),r=Nt(H,o),l=ie(o),c=Je(),d=n&&r.value.includes(n)||!1,p=a.disabled||e.disabled;return t.jsx(St,{scope:o,open:d,disabled:p,triggerId:c,children:t.jsx(Qe,{"data-orientation":a.orientation,"data-state":Me(d),...l,...i,ref:s,disabled:p,open:d,onOpenChange:u=>{u?r.onItemOpen(n):r.onItemClose(n)}})})});Se.displayName=H;var ke="AccordionHeader",kt=_.forwardRef((e,s)=>{const{__scopeAccordion:o,...n}=e,i=W(P,o),a=re(ke,o);return t.jsx(ge.h3,{"data-orientation":i.orientation,"data-state":Me(a.open),"data-disabled":a.disabled?"":void 0,...n,ref:s})});kt.displayName=ke;var oe="AccordionTrigger",Ee=_.forwardRef((e,s)=>{const{__scopeAccordion:o,...n}=e,i=W(P,o),a=re(oe,o),r=Ot(oe,o),l=ie(o);return t.jsx(ne.ItemSlot,{scope:o,children:t.jsx(Ze,{"aria-disabled":a.open&&!r.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...l,...n,ref:s})})});Ee.displayName=oe;var Te="AccordionContent",Le=_.forwardRef((e,s)=>{const{__scopeAccordion:o,...n}=e,i=W(P,o),a=re(Te,o),r=ie(o);return t.jsx(et,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...r,...n,ref:s,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});Le.displayName=Te;function Me(e){return e?"open":"closed"}var Et=Oe,Tt=Se,Lt=Ee,Mt=Le,Dt=(e,s,o)=>({attribute:e,operator:s,value:w(o)}),uo=e=>[{value:e.gte,operator:"gte"},{value:e.lte,operator:"lte"},{value:e.gt,operator:"gt"},{value:e.lt,operator:"lt"},{value:e.eq,operator:"eq"}].filter(({value:n})=>n).map(({operator:n,value:i})=>Dt(qe,n,i)),De=B({amount:J([F(),S()]),gte:J([F(),S()]).nullish(),lte:J([F(),S()]).nullish(),lt:S().nullish(),gt:S().nullish(),eq:S().nullish()}).refine(e=>e.amount!=="",{message:M("stockLocations.shippingOptions.conditionalPrices.errors.amountRequired"),path:["amount"]}).refine(e=>e.eq!==void 0||e.lt!==void 0||e.gt!==void 0?!0:e.gte!==void 0&&e.gte!==""||e.lte!==void 0&&e.lte!=="",{message:M("stockLocations.shippingOptions.conditionalPrices.errors.minOrMaxRequired"),path:["gte"]}).refine(e=>{if(e.gte!=null&&e.gte!==""&&e.lte!=null&&e.lte!==""){const s=w(e.gte),o=w(e.lte);return s<=o}return!0},{message:M("stockLocations.shippingOptions.conditionalPrices.errors.minGreaterThanMax"),path:["gte"]}),Vt=De.and(B({id:F().optional()}));function Ve(e,s){const o=e.prices;for(let n=0;n<o.length;n++)for(let i=n+1;i<o.length;i++){const a=o[n],r=o[i];if(a.amount===""||r.amount==="")continue;const l=w(a.amount),c=w(r.amount);l===c&&Ft(s,i),[{value:a.gte,type:"gte"},{value:a.lte,type:"lte"},{value:a.eq,type:"eq"},{value:a.lt,type:"lt"},{value:a.gt,type:"gt"}].forEach(p=>{if(!p.value&&p.value!==0)return;[{value:r.gte,type:"gte"},{value:r.lte,type:"lte"},{value:r.eq,type:"eq"},{value:r.lt,type:"lt"},{value:r.gt,type:"gt"}].forEach(m=>{if(!m.value&&m.value!==0)return;const h=w(p.value),x=w(m.value);h===x&&qt(s,i,m.type)})})}}var zt=B({prices:ve(De)}).superRefine(Ve),$t=B({prices:ve(Vt)}).superRefine(Ve),Ft=(e,s)=>{e.addIssue({code:je.custom,message:M("stockLocations.shippingOptions.conditionalPrices.errors.duplicateAmount"),path:["prices",s,"amount"]})},qt=(e,s,o)=>{e.addIssue({code:je.custom,message:M("stockLocations.shippingOptions.conditionalPrices.errors.overlappingConditions"),path:["prices",s,o]})},ze=f.createContext(null),po=({children:e,onOpenConditionalPricesModal:s,onCloseConditionalPricesModal:o})=>t.jsx(ze.Provider,{value:{onOpenConditionalPricesModal:s,onCloseConditionalPricesModal:o},children:e}),$e=()=>{const e=f.useContext(ze);if(!e)throw new Error("useShippingOptionPrice must be used within a ShippingOptionPriceProvider");return e},Fe=(e,s)=>{const o=s==="region"?"region_prices":"currency_prices",n=s==="region"?"conditional_region_prices":"conditional_currency_prices";return e.replace(o,n)},Kt="rule-item",V=e=>`${Kt}-${e}`,mo=({info:e,variant:s})=>{const{t:o}=$(),{getValues:n,setValue:i}=nt(),{onCloseConditionalPricesModal:a}=$e(),[r,l]=f.useState([V(0)]),{field:c,type:d,currency:p,name:u}=e,m=Fe(c,d),h=it({defaultValues:{prices:n(m)||[{amount:"",gte:"",lte:null}]},resolver:rt(s==="create"?zt:$t)}),{fields:x,append:b,remove:C}=at({control:h.control,name:"prices"}),R=()=>{b({amount:"",gte:"",lte:null}),l([...r,V(x.length)])},j=v=>{C(v)},g=h.handleSubmit(v=>{i(m,v.prices,{shouldDirty:!0,shouldValidate:!0,shouldTouch:!0}),a()},v=>{const O=Object.keys(v.prices||{});l(X=>{const E=new Set(X);return O.forEach(T=>{E.add(V(Number(T)))}),Array.from(E)})}),N=v=>{v.key==="Enter"&&(v.metaKey||v.ctrlKey)&&(console.log("Fired"),v.preventDefault(),v.stopPropagation(),g())};return t.jsx(y,{...h,children:t.jsx(We,{onSubmit:g,onKeyDown:N,className:"flex h-full flex-col",children:t.jsxs(A.Content,{children:[t.jsx(A.Header,{}),t.jsx(A.Body,{className:"size-full overflow-hidden",children:t.jsx("div",{className:"flex size-full flex-1 flex-col items-center overflow-y-auto",children:t.jsx("div",{className:"flex w-full max-w-[720px] flex-col gap-y-8 px-6 py-16",children:t.jsxs("div",{className:"flex w-full flex-col gap-y-6",children:[t.jsxs("div",{children:[t.jsx(A.Title,{asChild:!0,children:t.jsx(lt,{children:o("stockLocations.shippingOptions.conditionalPrices.header",{name:u})})}),t.jsx(A.Description,{asChild:!0,children:t.jsx(q,{size:"small",className:"text-ui-fg-subtle",children:o("stockLocations.shippingOptions.conditionalPrices.description")})})]}),t.jsx(Gt,{value:r,onValueChange:l,children:x.map((v,O)=>t.jsx(Ht,{index:O,onRemove:j,currency:p,control:h.control},v.id))}),t.jsx("div",{className:"flex items-center justify-end",children:t.jsx(Y,{variant:"secondary",size:"small",type:"button",onClick:R,children:o("stockLocations.shippingOptions.conditionalPrices.actions.addPrice")})})]})})})}),t.jsx(A.Footer,{children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx(A.Close,{asChild:!0,children:t.jsx(Y,{variant:"secondary",size:"small",type:"button",children:o("actions.cancel")})}),t.jsx(Y,{size:"small",type:"button",onClick:g,children:o("actions.save")})]})})]})})})},Gt=({children:e,value:s,onValueChange:o})=>t.jsx(Et,{type:"multiple",defaultValue:[V(0)],value:s,onValueChange:o,className:"flex flex-col gap-y-3",children:e}),Ht=({index:e,currency:s,onRemove:o,control:n})=>{const{t:i}=$(),a=r=>{r.stopPropagation(),o(e)};return t.jsxs(Tt,{value:V(e),className:be("bg-ui-bg-component shadow-elevation-card-rest rounded-lg"),children:[t.jsx(Lt,{asChild:!0,children:t.jsxs("div",{className:"group/trigger flex w-full cursor-pointer items-start justify-between gap-x-2 p-3",children:[t.jsxs("div",{className:"flex flex-1 flex-wrap items-center justify-between gap-2",children:[t.jsx("div",{className:"flex h-7 items-center",children:t.jsx(Ut,{index:e,currency:s,control:n})}),t.jsx("div",{className:"flex min-h-7 items-center",children:t.jsx(Wt,{index:e,currency:s,control:n})})]}),t.jsxs("div",{className:"flex items-center gap-x-2",children:[t.jsx(te,{size:"small",variant:"transparent",className:"text-ui-fg-muted hover:text-ui-fg-subtle focus-visible:text-ui-fg-subtle",onClick:a,children:t.jsx(ct,{})}),t.jsx(te,{size:"small",variant:"transparent",className:"text-ui-fg-muted hover:text-ui-fg-subtle focus-visible:text-ui-fg-subtle",children:t.jsx(dt,{className:"transition-transform group-data-[state=open]/trigger:rotate-180"})})]})]})}),t.jsxs(Mt,{className:"text-ui-fg-subtle",children:[t.jsx(k,{variant:"dashed"}),t.jsx(y.Field,{control:n,name:`prices.${e}.amount`,render:({field:{value:r,onChange:l,...c}})=>t.jsx(y.Item,{children:t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsx("div",{className:"flex h-8 items-center",children:t.jsx(y.Label,{children:i("stockLocations.shippingOptions.conditionalPrices.rules.amount")})}),t.jsxs("div",{className:"flex flex-col gap-y-1",children:[t.jsx(y.Control,{children:t.jsx(D,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",placeholder:se({value:"0",decimalScale:s.decimal_digits}),decimalScale:s.decimal_digits,symbol:s.symbol_native,code:s.code,value:r,onValueChange:(d,p,u)=>l(u!=null&&u.value?u==null?void 0:u.value:""),autoFocus:!0,...c})}),t.jsx(y.ErrorMessage,{})]})]})})}),t.jsx(k,{variant:"dashed"}),t.jsx(y.Field,{control:n,name:`prices.${e}.gte`,render:({field:r})=>t.jsx(ue,{field:r,label:i("stockLocations.shippingOptions.conditionalPrices.rules.gte"),currency:s,placeholder:"1000"})}),t.jsx(k,{variant:"dashed"}),t.jsx(y.Field,{control:n,name:`prices.${e}.lte`,render:({field:r})=>t.jsx(ue,{field:r,label:i("stockLocations.shippingOptions.conditionalPrices.rules.lte"),currency:s,placeholder:"1000"})}),t.jsx(Bt,{index:e,control:n,currency:s})]})]})},ue=({field:e,label:s,currency:o,placeholder:n})=>{const i=f.useRef(null),{value:a,onChange:r,ref:l,...c}=e,d=fe(i,l),p=()=>{if(a===null){r(""),requestAnimationFrame(()=>{var m;(m=i.current)==null||m.focus()});return}r(null)},u=a===null;return t.jsx(y.Item,{children:t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsxs("div",{className:"flex h-8 items-center gap-x-1",children:[t.jsx(te,{size:"2xsmall",variant:"transparent",onClick:p,children:u?t.jsx(pt,{}):t.jsx(mt,{})}),t.jsx(y.Label,{children:s})]}),!u&&t.jsxs("div",{className:"flex flex-col gap-y-1",children:[t.jsx(y.Control,{children:t.jsx(D,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",placeholder:se({value:n,decimalScale:o.decimal_digits}),decimalScale:o.decimal_digits,symbol:o.symbol_native,code:o.code,value:a,ref:d,onValueChange:(m,h,x)=>r(x!=null&&x.value?x==null?void 0:x.value:""),...c})}),t.jsx(y.ErrorMessage,{})]})]})})},Bt=({index:e,control:s,currency:o})=>{const{t:n}=$(),i=z({control:s,name:`prices.${e}`});return i.eq==null&&i.gt==null&&i.lt==null?null:t.jsxs("div",{children:[t.jsx(k,{variant:"dashed"}),t.jsxs("div",{className:"flex items-center gap-x-1 px-3 pt-3",children:[t.jsx(q,{size:"small",leading:"compact",weight:"plus",children:n("stockLocations.shippingOptions.conditionalPrices.customRules.label")}),t.jsx(ft,{content:n("stockLocations.shippingOptions.conditionalPrices.customRules.tooltip"),children:t.jsx(ht,{className:"text-ui-fg-muted"})})]}),t.jsxs("div",{children:[i.eq!=null&&t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsx("div",{className:"flex h-8 items-center",children:t.jsx(Q,{weight:"plus",size:"small",children:n("stockLocations.shippingOptions.conditionalPrices.customRules.eq")})}),t.jsx(D,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",symbol:o.symbol_native,code:o.code,value:i.eq,disabled:!0})]}),i.gt!=null&&t.jsxs(f.Fragment,{children:[t.jsx(k,{variant:"dashed"}),t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsx("div",{className:"flex h-8 items-center",children:t.jsx(Q,{weight:"plus",size:"small",children:n("stockLocations.shippingOptions.conditionalPrices.customRules.gt")})}),t.jsx(D,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",symbol:o.symbol_native,code:o.code,value:i.gt,disabled:!0})]})]}),i.lt!=null&&t.jsxs(f.Fragment,{children:[t.jsx(k,{variant:"dashed"}),t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsx("div",{className:"flex h-8 items-center",children:t.jsx(Q,{weight:"plus",size:"small",children:n("stockLocations.shippingOptions.conditionalPrices.customRules.lt")})}),t.jsx(D,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",symbol:o.symbol_native,code:o.code,value:i.lt,disabled:!0})]})]})]})]})},Ut=({index:e,currency:s,control:o})=>{const n=z({control:o,name:`prices.${e}.amount`});if(n===""||n===void 0)return t.jsx(q,{size:"small",weight:"plus",children:"-"});const i=w(n);return t.jsx(q,{size:"small",weight:"plus",children:L(i,s.code)})},ee=({children:e})=>t.jsx("div",{className:"text-ui-fg-subtle txt-small flex flex-wrap items-center gap-1.5",children:e}),Wt=({index:e,currency:s,control:o})=>{const{t:n,i18n:i}=$(),a=z({control:o,name:`prices.${e}.gte`}),r=z({control:o,name:`prices.${e}.lte`});return(()=>{const c=a?w(a):void 0,d=r?w(r):void 0;return!c&&!d?null:c&&!d?t.jsx(ee,{children:t.jsx(Z,{i18n:i,i18nKey:"stockLocations.shippingOptions.conditionalPrices.summaries.greaterThan",components:[t.jsx(I,{size:"2xsmall"},"attribute"),t.jsx(I,{size:"2xsmall"},"gte")],values:{attribute:n("stockLocations.shippingOptions.conditionalPrices.attributes.cartItemTotal"),gte:L(c,s.code)}})}):!c&&d?t.jsx(ee,{children:t.jsx(Z,{i18n:i,i18nKey:"stockLocations.shippingOptions.conditionalPrices.summaries.lessThan",components:[t.jsx(I,{size:"2xsmall"},"attribute"),t.jsx(I,{size:"2xsmall"},"lte")],values:{attribute:n("stockLocations.shippingOptions.conditionalPrices.attributes.cartItemTotal"),lte:L(d,s.code)}})}):c&&d?t.jsx(ee,{children:t.jsx(Z,{i18n:i,i18nKey:"stockLocations.shippingOptions.conditionalPrices.summaries.range",components:[t.jsx(I,{size:"2xsmall"},"attribute"),t.jsx(I,{size:"2xsmall"},"gte"),t.jsx(I,{size:"2xsmall"},"lte")],values:{attribute:n("stockLocations.shippingOptions.conditionalPrices.attributes.cartItemTotal"),gte:L(c,s.code),lte:L(d,s.code)}})}):null})()},pe=({context:e,code:s,header:o,type:n})=>{const[i,a]=f.useState(0),r=f.useCallback(b=>{if(b){const C=b.offsetWidth;a(C)}},[]),{field:l,control:c,renderProps:d}=Ge({context:e}),p=He({context:e}),{container:u,input:m}=d,{isAnchor:h}=u,x=Ue[s.toUpperCase()];return t.jsx(ut,{control:c,name:l,render:({field:b})=>t.jsx(Be,{...u,...p,outerComponent:t.jsx(Xt,{header:o,isAnchor:h,field:l,control:c,symbolWidth:i,type:n,currency:x}),children:t.jsx(Yt,{field:b,inputProps:m,currencyInfo:x,onMeasureSymbol:r})})})},Xt=({isAnchor:e,header:s,field:o,control:n,symbolWidth:i,type:a,currency:r})=>{const{onOpenConditionalPricesModal:l}=$e(),c=f.useRef(null),d=Fe(o,a),p=z({control:n,name:d});return f.useEffect(()=>{const u=m=>{var h;e&&(m.metaKey||m.ctrlKey)&&m.key.toLowerCase()==="b"&&(m.preventDefault(),(h=c.current)==null||h.click())};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[e]),t.jsxs("div",{className:"absolute inset-y-0 z-[3] flex w-fit items-center justify-center",style:{left:i?`${i+16+4}px`:void 0},children:[(p==null?void 0:p.length)>0&&!e&&t.jsx("div",{className:"flex size-[15px] items-center justify-center group-hover/container:hidden",children:t.jsx(Ne,{className:"text-ui-fg-interactive"})}),t.jsx("button",{ref:c,type:"button",className:be("hover:text-ui-fg-subtle text-ui-fg-muted transition-fg hidden size-[15px] items-center justify-center rounded-md bg-transparent group-hover/container:flex",{flex:e}),onClick:()=>l({type:a,field:o,currency:r,name:s}),children:t.jsx(_e,{})})]})},Yt=({field:e,onMeasureSymbol:s,inputProps:o,currencyInfo:n})=>{const{value:i,onChange:a,onBlur:r,ref:l,...c}=e,{ref:d,onBlur:p,onFocus:u,onChange:m,...h}=o,x=f.useCallback(g=>{const N=typeof g=="number"?g.toString():g||"";return se({value:N,decimalScale:n.decimal_digits,disableGroupSeparators:!0,decimalSeparator:"."})},[n]),[b,C]=f.useState(i||""),R=(g,N,v)=>{if(!g){C("");return}C(g)};f.useEffect(()=>{let g=i;isNaN(Number(i))||(g=x(g)),C(g)},[i,x]);const j=fe(d,l);return t.jsxs("div",{className:"relative flex size-full items-center",children:[t.jsx("span",{className:"txt-compact-small text-ui-fg-muted pointer-events-none absolute left-0 w-fit min-w-4","aria-hidden":!0,ref:s,children:n.symbol_native}),t.jsx(xt,{...c,...h,ref:j,className:"txt-compact-small w-full flex-1 cursor-default appearance-none bg-transparent pl-[60px] text-right outline-none",value:b||void 0,onValueChange:R,formatValueOnBlur:!0,onBlur:()=>{r(),p(),m(b,i)},onFocus:u,decimalScale:n.decimal_digits,decimalsLimit:n.decimal_digits,autoComplete:"off",tabIndex:-1})]})},Jt=me(),fo=({name:e,currencies:s=[],regions:o=[],pricePreferences:n=[]})=>{const{t:i}=$();return f.useMemo(()=>[Jt.column({id:"name",name:i("fields.name"),disableHiding:!0,header:i("fields.name"),cell:a=>t.jsx(Ke.ReadonlyCell,{context:a,children:e})}),...Qt({currencies:s,regions:o,pricePreferences:n,getFieldName:(a,r)=>{var l;return(l=a.column.id)!=null&&l.startsWith("currency_prices")?`currency_prices.${r}`:`region_prices.${r}`},t:i})],[i,s,o,n,e])},Qt=({currencies:e,regions:s,pricePreferences:o,getFieldName:n,t:i})=>{const a=me();return[...(e==null?void 0:e.map(r=>{const l=o==null?void 0:o.find(d=>d.attribute==="currency_code"&&d.value===r),c=i("fields.priceTemplate",{regionOrCurrency:r.toUpperCase()});return a.column({id:`currency_prices.${r}`,name:i("fields.priceTemplate",{regionOrCurrency:r.toUpperCase()}),field:d=>n(d,r),type:"number",header:()=>t.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[t.jsx("span",{className:"truncate",title:c,children:c}),t.jsx(le,{includesTax:l==null?void 0:l.is_tax_inclusive})]}),cell:d=>t.jsx(pe,{type:"currency",header:c,code:r,context:d})})}))??[],...(s==null?void 0:s.map(r=>{const l=o==null?void 0:o.find(d=>d.attribute==="region_id"&&d.value===r.id),c=i("fields.priceTemplate",{regionOrCurrency:r.name});return a.column({id:`region_prices.${r.id}`,name:i("fields.priceTemplate",{regionOrCurrency:r.name}),field:d=>n(d,r.id),type:"number",header:()=>t.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[t.jsx("span",{className:"truncate",title:c,children:c}),t.jsx(le,{includesTax:l==null?void 0:l.is_tax_inclusive})]}),cell:d=>(e==null?void 0:e.find(u=>u===r.currency_code))?t.jsx(pe,{type:"region",header:c,code:r.currency_code,context:d}):null})}))??[]]};export{mo as C,po as S,Vt as U,De as a,uo as b,fo as u};
