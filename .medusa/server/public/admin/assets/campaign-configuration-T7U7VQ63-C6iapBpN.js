import{K as g}from"./chunk-6HTZNHPT-C3g-6wSS.js";import{b as r,u as f}from"./chunk-4TC5YS65-C1s3AhWO.js";import{b as j,W as C,dP as _,j as s,H as y,ac as b,ad as v,dS as S,t as m,w as e,B as u,a6 as F,dJ as x}from"./index-C_TCY6wF.js";import{D as h}from"./date-picker-XI5VNAa_.js";import"./prompt-B3qCXbW-.js";import"./clsx-B-dksMZM.js";import"./popover-CXBXA6aZ.js";import"./triangle-left-mini-z-W_Cr34.js";var w=F({starts_at:x().nullable(),ends_at:x().nullable()}),D=({campaign:a})=>{const{t}=j(),{handleSuccess:o}=f(),n=b({defaultValues:{starts_at:a.starts_at?new Date(a.starts_at):void 0,ends_at:a.ends_at?new Date(a.ends_at):void 0},resolver:v(w)}),{mutateAsync:l,isPending:d}=S(a.id),p=n.handleSubmit(async i=>{await l({starts_at:i.starts_at||null,ends_at:i.ends_at||null},{onSuccess:({campaign:c})=>{m.success(t("campaigns.configuration.edit.successToast",{name:c.name})),o()},onError:c=>{m.error(c.message)}})});return s.jsx(r.Form,{form:n,children:s.jsxs(g,{onSubmit:p,className:"flex flex-1 flex-col",children:[s.jsx(r.Body,{children:s.jsxs("div",{className:"flex flex-col gap-y-4",children:[s.jsx(e.Field,{control:n.control,name:"starts_at",render:({field:i})=>s.jsxs(e.Item,{children:[s.jsx(e.Label,{children:t("campaigns.fields.start_date")}),s.jsx(e.Control,{children:s.jsx(h,{granularity:"minute",hourCycle:12,shouldCloseOnSelect:!1,...i})}),s.jsx(e.ErrorMessage,{})]})}),s.jsx(e.Field,{control:n.control,name:"ends_at",render:({field:i})=>s.jsxs(e.Item,{children:[s.jsx(e.Label,{children:t("campaigns.fields.end_date")}),s.jsx(e.Control,{children:s.jsx(h,{granularity:"minute",shouldCloseOnSelect:!1,...i})}),s.jsx(e.ErrorMessage,{})]})})]})}),s.jsx(r.Footer,{children:s.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[s.jsx(r.Close,{asChild:!0,children:s.jsx(u,{variant:"secondary",size:"small",children:t("actions.cancel")})}),s.jsx(u,{isLoading:d,type:"submit",variant:"primary",size:"small",children:t("actions.save")})]})})]})})},R=()=>{const{t:a}=j(),{id:t}=C(),{campaign:o,isLoading:n,isError:l,error:d}=_(t);if(l)throw d;return s.jsxs(r,{children:[s.jsxs(r.Header,{children:[s.jsx(r.Title,{asChild:!0,children:s.jsx(y,{children:a("campaigns.configuration.edit.header")})}),s.jsx(r.Description,{className:"sr-only",children:a("campaigns.configuration.edit.description")})]}),!n&&o&&s.jsx(D,{campaign:o})]})};export{R as Component};
